dist: xenial
language: python

before_script:
        - rm ./back/db.sqlite3
        - rm -r ./back/snu_moyeo/migrations
        - python3 ./back/manage.py makemigrations snu_moyeo
        - python3 ./back/manage.py migrate
install:
        - pip install django
        - pip install djangorestframework
        - pip install coverage
        - pip install requests
        - pip install django-cors-headers
        - pip install django-rest-auth
        - pip install django-allauth
script:
        - cd back/
        - python3 manage.py runserver&
        - sleep 3
        - coverage run --source='.' manage.py test snu_moyeo
        - coverage report



language: node_js

install:
        - sudo apt-get install curl
        - curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash - 
        - sudo apt-get install -y nodejs
        - npm install --save cross-env
        - npm install -g yo generator-arc
        - npm jest

script:
        - cd front/
        - npm test -- --coverage
